(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{119:function(e,t,a){"use strict";var n=a(27),r=a(16),c=a(0);t.a=function(e){var t=e.as,a=void 0===t?"div":t,o=Object(r.a)(e,["as"]);return function(e){var t=e.as,a=void 0===t?"div":t,n=Object(r.a)(e,["as"]);return"function"==typeof n.children?n.children(n):Object(c.createElement)(a,n)}(Object(n.a)({as:a,className:"components-visually-hidden"},o))}},171:function(e,t,a){"use strict";var n=a(0),r=a(10),c=a.n(r),o=a(119);function l(e){var t=e.id,a=e.label,r=e.hideLabelFromVision,i=e.help,s=e.className,u=e.children;return Object(n.createElement)("div",{className:c()("components-base-control",s)},Object(n.createElement)("div",{className:"components-base-control__field"},a&&t&&(r?Object(n.createElement)(o.a,{as:"label",htmlFor:t},a):Object(n.createElement)("label",{className:"components-base-control__label",htmlFor:t},a)),a&&!t&&(r?Object(n.createElement)(o.a,{as:"label"},a):Object(n.createElement)(l.VisualLabel,null,a)),u),!!i&&Object(n.createElement)("p",{id:t+"__help",className:"components-base-control__help"},i))}l.VisualLabel=function(e){var t=e.className,a=e.children;return t=c()("components-base-control__label",t),Object(n.createElement)("span",{className:t},a)},t.a=l},173:function(e,t,a){"use strict";var n=a(11),r=a(0),c=a(53),o=new WeakMap;function l(e){return Object(r.useMemo)((function(){return function(e){var t=o.get(e)||0;return o.set(e,t+1),t}(e)}),[e])}t.a=Object(c.a)((function(e){return function(t){var a=l(e);return Object(r.createElement)(e,Object(n.a)({},t,{instanceId:a}))}}),"withInstanceId")},709:function(e,t,a){"use strict";var n=a(11),r=a(17),c=a(16),o=a(0),l=a(2),i=a(173),s=a(171);t.a=Object(i.a)((function(e){var t=e.help,a=e.instanceId,i=e.label,u=e.multiple,m=void 0!==u&&u,d=e.onChange,b=e.options,p=void 0===b?[]:b,f=e.className,v=e.hideLabelFromVision,h=Object(c.a)(e,["help","instanceId","label","multiple","onChange","options","className","hideLabelFromVision"]),_="inspector-select-control-".concat(a);return!Object(l.isEmpty)(p)&&Object(o.createElement)(s.a,{label:i,hideLabelFromVision:v,id:_,help:t,className:f},Object(o.createElement)("select",Object(n.a)({id:_,className:"components-select-control__input",onChange:function(e){if(m){var t=Object(r.a)(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}));d(t)}else d(e.target.value)},"aria-describedby":t?"".concat(_,"__help"):void 0,multiple:m},h),p.map((function(e,t){return Object(o.createElement)("option",{key:"".concat(e.label,"-").concat(e.value,"-").concat(t),value:e.value,disabled:e.disabled},e.label)}))))}))},747:function(e,t,a){"use strict";var n=a(758),r=["a","b","em","i","strong","p"],c=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(n.sanitize)(e,{ALLOWED_TAGS:r,ALLOWED_ATTR:c})}}},778:function(e,t,a){},910:function(e,t,a){"use strict";a.r(t);var n=a(41),r=a.n(n),c=a(40),o=a.n(c),l=a(59),i=a.n(l),s=a(44),u=a.n(s),m=a(29),d=a.n(m),b=a(42),p=a.n(b),f=a(0),v=a(3),h=a(88),_=a(709),O=a(80),j=a(85),g=a(10),E=a.n(g),w=a(35),N=a.n(w),y=a(256),A=a(19),x=a(12),k=a.n(x),L=a(63),I=a(26),R=a(101),S=a(24),C=a(747),F=a(1),M=a.n(F);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){p()(n,e);var t,a=(t=n,function(){var e,a=d()(t);if(z()){var n=d()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return u()(this,e)});function n(){return r()(this,n),a.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props.hasMultipleAlerts;return Object(f.createElement)("div",{className:"woocommerce-card woocommerce-store-alerts is-loading","aria-hidden":!0},Object(f.createElement)("div",{className:"woocommerce-card__header"},Object(f.createElement)("div",{className:"woocommerce-card__title woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"})),e&&Object(f.createElement)("div",{className:"woocommerce-card__action woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"}))),Object(f.createElement)("div",{className:"woocommerce-card__body"},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message"},Object(f.createElement)("span",{className:"is-placeholder"}),Object(f.createElement)("span",{className:"is-placeholder"})),Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},Object(f.createElement)("span",{className:"is-placeholder"}))))}}]),n}(f.Component),P=D;D.propTypes={hasMultipleAlerts:M.a.bool},D.defaultProps={hasMultipleAlerts:!1};var T=a(79);a(778);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){p()(n,e);var t,a=(t=n,function(){var e,a=d()(t);if(V()){var n=d()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return u()(this,e)});function n(e){var t;r()(this,n);var c=(t=a.call(this,e)).props.alerts;return t.state={currentIndex:c?0:null},t.previousAlert=t.previousAlert.bind(i()(t)),t.nextAlert=t.nextAlert.bind(i()(t)),t}return o()(n,[{key:"previousAlert",value:function(e){e.stopPropagation();var t=this.state.currentIndex;t>0&&this.setState({currentIndex:t-1})}},{key:"nextAlert",value:function(e){e.stopPropagation();var t=this.props.alerts,a=this.state.currentIndex;a<t.length-1&&this.setState({currentIndex:a+1})}},{key:"renderActions",value:function(e){var t=this.props,a=t.triggerNoteAction,n=t.updateNote,r=e.actions.map((function(t){return Object(f.createElement)(h.a,{key:t.name,isDefault:!0,isPrimary:t.primary,href:t.url||void 0,onClick:function(){return a(e.id,t.id)}},t.label)})),c=[{value:k()().add(4,"hours").unix().toString(),label:Object(v.__)("Later Today",'woocommerce')},{value:k()().add(1,"day").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Tomorrow",'woocommerce')},{value:k()().add(1,"week").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Week",'woocommerce')},{value:k()().add(1,"month").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Month",'woocommerce')}],o=e.is_snoozable&&Object(f.createElement)(_.a,{className:"woocommerce-store-alerts__snooze",options:[{label:Object(v.__)("Remind Me Later",'woocommerce'),value:"0"}].concat(c),onChange:function(t){if("0"!==t){var a=c.find((function(e){return e.value===t}));!function(t){n(e.id,{status:"snoozed",date_reminder:t.value});var a={alert_name:e.name,alert_title:e.title,snooze_duration:t.value,snooze_label:t.label};Object(T.b)("store_alert_snooze",a)}({value:t,label:a&&a.label})}}});if(r||o)return Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},r,o)}},{key:"render",value:function(){var e=this.props.alerts||[],t=Object(I.g)("alertCount",0,(function(e){return parseInt(e,10)}));if(t>0&&this.props.isLoading)return Object(f.createElement)(P,{hasMultipleAlerts:t>1});if(0===e.length)return null;var a=this.state.currentIndex,n=e.length,r=e[a],c=r.type,o=E()("woocommerce-store-alerts","woocommerce-analytics__card",{"is-alert-error":"error"===c,"is-alert-update":"update"===c});return Object(f.createElement)(L.Card,{title:[r.icon&&Object(f.createElement)(O.a,{key:"icon",icon:r.icon}),Object(f.createElement)(f.Fragment,{key:"title"},r.title)],className:o,action:n>1&&Object(f.createElement)("div",{className:"woocommerce-store-alerts__pagination"},Object(f.createElement)(j.a,{icon:"arrow-left-alt2",onClick:this.previousAlert,disabled:0===a,label:Object(v.__)("Previous Alert",'woocommerce')}),Object(f.createElement)("span",{className:"woocommerce-store-alerts__pagination-label",role:"status","aria-live":"polite"},N()({mixedString:Object(v.__)("{{current /}} of {{total /}}",'woocommerce'),components:{current:Object(f.createElement)(f.Fragment,null,a+1),total:Object(f.createElement)(f.Fragment,null,n)}})),Object(f.createElement)(j.a,{icon:"arrow-right-alt2",onClick:this.nextAlert,disabled:n-1===a,label:Object(v.__)("Next Alert",'woocommerce')}))},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message",dangerouslySetInnerHTML:Object(C.a)(r.content)}),this.renderActions(r))}}]),n}(f.Component);t.default=Object(y.a)(Object(R.a)((function(e){var t=e("wc-api"),a=t.getNotes,n=t.isGetNotesRequesting,r={page:1,per_page:S.d.pageSize,type:"error,update",status:"unactioned"};return{alerts:a(r).filter((function(e){return"unactioned"===e.status})),isLoading:n(r)}})),Object(A.withDispatch)((function(e){var t=e("wc-api");return{triggerNoteAction:t.triggerNoteAction,updateNote:t.updateNote}})))(W)}}]);
