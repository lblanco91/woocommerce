(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{896:function(e,t,r){},902:function(e,t,r){"use strict";r.r(t);var n=r(41),a=r.n(n),c=r(40),o=r.n(c),i=r(44),s=r.n(i),u=r(29),l=r.n(u),d=r(42),m=r.n(d),f=r(0),p=r(3),b=r(256),y=r(19),h=r(12),O=r.n(h),j=r(2),v=r(104),g=r(22),_=r(204),k=r(26),w=r(51),E=r(63),R=r(101),I=(r(896),r(79)),D=r(203);function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=Object(k.g)("dataEndpoints",{performanceIndicators:[]}).performanceIndicators,T=function(e){m()(n,e);var t,r=(t=n,function(){var e,r=l()(t);if(S()){var n=l()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s()(this,e)});function n(){return a()(this,n),r.apply(this,arguments)}return o()(n,[{key:"renderMenu",value:function(){var e=this.props,t=e.hiddenBlocks,r=e.isFirst,n=e.isLast,a=e.onMove,c=e.onRemove,o=e.onTitleBlur,i=e.onTitleChange,s=e.onToggleHiddenBlock,u=e.titleInput,l=e.controls;return Object(f.createElement)(E.EllipsisMenu,{label:Object(p.__)("Choose which analytics to display and the section name",'woocommerce'),renderContent:function(e){var d=e.onToggle;return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(E.MenuTitle,null,Object(p.__)("Display Stats:",'woocommerce')),C.map((function(e,r){var n=!t.includes(e.stat);return Object(f.createElement)(E.MenuItem,{checked:n,isCheckbox:!0,isClickable:!0,key:r,onInvoke:function(){s(e.stat)(),Object(I.b)("dash_indicators_toggle",{status:n?"off":"on",key:e.stat})}},e.label)})),Object(f.createElement)(l,{onToggle:d,onMove:a,onRemove:c,isFirst:r,isLast:n,onTitleBlur:o,onTitleChange:i,titleInput:u}))}})}},{key:"renderList",value:function(){var e=this.props,t=e.query,r=e.primaryRequesting,n=e.secondaryRequesting,a=e.primaryError,c=e.secondaryError,o=e.primaryData,i=e.secondaryData,s=e.userIndicators,u=e.defaultDateRange;if(r||n)return Object(f.createElement)(E.SummaryListPlaceholder,{numberOfItems:s.length});if(a||c)return null;var l=Object(g.getPersistedQuery)(t),d="previous_period"===Object(v.h)(t,u).compare?Object(p.__)("Previous Period:",'woocommerce'):Object(p.__)("Previous Year:",'woocommerce'),m=this.context,b=m.formatCurrency,y=(0,m.getCurrency)();return Object(f.createElement)(E.SummaryList,null,(function(){return s.map((function(e,t){var r=Object(j.find)(o.data,(function(t){return t.stat===e.stat})),n=Object(j.find)(i.data,(function(t){return t.stat===e.stat}));if(!r||!n)return null;var a=r._links&&r._links.report[0]&&r._links.report[0].href||"",c=a&&Object(g.getNewPath)(l,a,{chart:r.chart})||"",s="currency"===r.format,u=Object(_.calculateDelta)(r.value,n.value),m=s?b(r.value):Object(_.formatValue)(y,r.format,r.value),p=s?b(n.value):Object(_.formatValue)(y,n.format,n.value);return Object(f.createElement)(E.SummaryNumber,{key:t,href:c,label:e.label,value:m,prevLabel:d,prevValue:p,delta:u,onLinkClickCallback:function(){Object(I.b)("dash_indicators_click",{key:e.stat})}})}))}))}},{key:"render",value:function(){var e=this.props,t=e.userIndicators,r=e.title;return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(E.SectionHeader,{title:r||Object(p.__)("Store Performance",'woocommerce'),menu:this.renderMenu()}),t.length>0&&Object(f.createElement)("div",{className:"woocommerce-dashboard__store-performance"},this.renderList()))}}]),n}(f.Component);T.contextType=D.a,t.default=Object(b.a)(Object(R.a)((function(e,t){var r=t.hiddenBlocks,n=t.query,a=e("wc-api"),c=a.getReportItems,o=a.getReportItemsError,i=a.isReportItemsRequesting,s=e(w.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,u=Object(v.f)(n,s),l=u.primary.before,d=u.secondary.before,m=C.filter((function(e){return!r.includes(e.stat)})),f=m.map((function(e){return e.stat})).join(",");if(0===f.length)return{hiddenBlocks:r,userIndicators:m,indicators:C,defaultDateRange:s};var p={after:Object(v.a)(u.primary.after,"start"),before:Object(v.a)(l,l.isSame(O()(),"day")?"now":"end"),stats:f},b={after:Object(v.a)(u.secondary.after,"start"),before:Object(v.a)(d,d.isSame(O()(),"day")?"now":"end"),stats:f},y=c("performance-indicators",p),h=o("performance-indicators",p)||null,j=i("performance-indicators",p),g=c("performance-indicators",b),_=o("performance-indicators",b)||null,k=i("performance-indicators",b);return{hiddenBlocks:r,userIndicators:m,indicators:C,primaryData:y,primaryError:h,primaryRequesting:j,secondaryData:g,secondaryError:_,secondaryRequesting:k,defaultDateRange:s}})),Object(y.withDispatch)((function(e){return{updateCurrentUserData:e("wc-api").updateCurrentUserData}})))(T)}}]);
